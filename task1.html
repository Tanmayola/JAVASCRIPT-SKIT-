<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const complexData = [
        {
          id: 1,
          name: "John Doe",
          age: 30,
          address: {
            street: "123 Main St",
            city: "Anytown",
            country: "USA",
          },
          orders: [
            { orderId: "A123", amount: 50.75, status: "completed" },
            { orderId: "B456", amount: 30.25, status: "pending" },
          ],
        },
        {
          id: 2,
          name: "Jane Smith",
          age: 25,
          address: {
            street: "456 Oak St",
            city: "Othercity",
            country: "USA",
          },
          orders: [
            { orderId: "C789", amount: 100.5, status: "completed" },
            { orderId: "D012", amount: 75.2, status: "completed" },
          ],
        },
      ];

      const Younger = complexData.filter((user) => user.age <= 25);
      console.log(Younger);

      const Names = complexData.map((user) => user.name);
      console.log(Names);

      const GreaterThan50 = complexData
        .flatMap((user) => user.orders)
        .filter((order) => order.amount > 50);
      console.log(GreaterThan50);

      const orderIds = GreaterThan50.map((order) => order.orderId);
      console.log(orderIds);

      const PendingOrder = complexData.filter((user) =>
        user.orders.some((order) => order.status === "pending")
      );
      console.log(PendingOrder);

      const OrderAmounts = complexData.map((user) => {
        const Amount = user.orders.reduce(
          (total, order) => total + order.amount,
          0
        );
        return { name: user.name, Amount };
      });
      console.log(OrderAmounts);

      const B30And70 = complexData
        .flatMap((user) => user.orders)
        .filter((order) => order.amount >= 30 && order.amount <= 70);
      console.log(B30And70);

      const CompletedIds = complexData.map((user) => {
        const completedOrderIds = user.orders
          .filter((order) => order.status === "completed")
          .map((order) => order.orderId);
        return { name: user.name, completedOrderIds };
      });
      console.log(CompletedIds);

      const USAGreaterThan50 = complexData.filter(
        (user) =>
          user.address.country === "USA" &&
          user.orders.some((order) => order.amount > 50)
      );
      console.log(USAGreaterThan50);
    </script>
  </body>
</html>
